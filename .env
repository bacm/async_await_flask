# Configuration Environnement - Flask vs Quart Demo
# Copiez ce fichier vers .env et ajustez selon vos besoins

# ============================================================================
# FLASK WSGI CONFIGURATION
# ============================================================================

# Nombre de workers Gunicorn (processus)
# Recommandation: (2 × CPU cores) + 1
FLASK_WSGI_WORKERS=2

# Nombre de threads par worker
# Total concurrent requests = WORKERS × THREADS
FLASK_WSGI_THREADS=2

# Timeout pour les requêtes (secondes)
FLASK_WSGI_TIMEOUT=30

# Niveau de log
FLASK_WSGI_LOG_LEVEL=info

# ============================================================================
# FLASK ASYNC TRAP CONFIGURATION
# ============================================================================

# Même config que WSGI (pour démontrer que ça ne change rien)
FLASK_ASYNC_WORKERS=2
FLASK_ASYNC_THREADS=2
FLASK_ASYNC_TIMEOUT=30
FLASK_ASYNC_LOG_LEVEL=info

# ============================================================================
# FLASK ASGI WRAPPER CONFIGURATION
# ============================================================================

# Uvicorn workers
FLASK_ASGI_WORKERS=1
FLASK_ASGI_LOG_LEVEL=info

# ============================================================================
# QUART NATIVE CONFIGURATION
# ============================================================================

# Nombre de workers Uvicorn
# Note: Un seul worker peut gérer des centaines de requêtes concurrentes!
QUART_WORKERS=1

# Niveau de log
QUART_LOG_LEVEL=info

# ============================================================================
# BENCHMARK CONFIGURATION
# ============================================================================

# Nombre de requêtes pour les tests de charge
BENCHMARK_REQUESTS=100

# Timeout pour les requêtes individuelles (secondes)
BENCHMARK_TIMEOUT=30

# Nombre de workers pour les tests parallèles
BENCHMARK_WORKERS=50

# Sauvegarder les résultats détaillés
BENCHMARK_SAVE_DETAILED=true

# ============================================================================
# DOCKER CONFIGURATION
# ============================================================================

# Ports exposés
PORT_FLASK_WSGI=5001
PORT_FLASK_ASYNC=5002
PORT_FLASK_ASGI=5003
PORT_QUART=5004

# Network
DOCKER_NETWORK=async-demo

# ============================================================================
# DEVELOPMENT CONFIGURATION
# ============================================================================

# Mode debug (ne pas utiliser en production!)
DEBUG=false

# Python unbuffered output
PYTHONUNBUFFERED=1

# Timezone
TZ=UTC

# ============================================================================
# ADVANCED CONFIGURATION
# ============================================================================

# Gunicorn keepalive
GUNICORN_KEEPALIVE=5

# Uvicorn loop implementation
# Options: auto, asyncio, uvloop
UVICORN_LOOP=auto

# Limite de connexions
CONNECTION_LIMIT=1000

# Limite de taille de requête (bytes)
MAX_REQUEST_SIZE=10485760

# ============================================================================
# MONITORING & METRICS (optionnel)
# ============================================================================

# Activer les métriques Prometheus
ENABLE_METRICS=false

# Port pour les métriques
METRICS_PORT=9090

# ============================================================================
# TESTING & DEBUGGING
# ============================================================================

# Afficher les requêtes dans les logs
LOG_REQUESTS=true

# Afficher les stack traces complètes
LOG_STACKTRACE=true

# Profiling (impact sur les performances!)
ENABLE_PROFILING=false
